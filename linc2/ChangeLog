2001-07-18  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_writev):
	s/g_main_iteration/linc_main_iteration/.

	* src/linc.c (linc_main_iteration): impl.
	(linc_init): make the linc_loop run.
	(linc_main_pending): impl.
	(linc_main_loop_run): impl.

	* src/linc-server.c (linc_server_dispose): upd.
	(linc_server_setup): upd.
	(linc_server_get_type): re-order to kill redundant
	prototypes.

	* src/linc-connection.c (linc_source_remove): upd.
	(linc_connection_init): remove; redundant.
	(linc_connection_real_state_changed): upd.
	(linc_connection_connected): upd.

	* src/linc.c (linc_io_add_watch): impl.
	(linc_io_remove_watch): impl.

	* include/linc/linc-types.h: add LincWatch type.

	* src/*.c: s/g_io_add_watch/linc_io_add_watch/

2001-07-16  Darin Adler  <darin@bentspoon.com>

	* include/linc/linc-types.h: Fix order of includes to
	keep Linux happy -- the Solaris change let to a compile
	failure on Linux.

	* src/linc.c: (linc_init): Add a missing ifdef.

2001-07-16  Laszlo Peter  <laca@ireland.sun.com>

	* src/linc-protocols.c: set fakelen to 0 when fakehost is NULL
        to avoid core dump on Solaris.

	* include/linc/linc-types.h: include <sys/types.h> to
	keep Solaris happy.

2001-07-13  Darin Adler  <darin@bentspoon.com>

	* configure.in: Remove duplicate macros, and fix one of
	the test invocations that was not using the x prefix
	technique correctly.

2001-07-13  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_initiate): add
	more error checking on fcntls.

2001-07-08  Seth Nickell  <snickell@stanford.edu>

	* src/linc.c: (linc_init):

	Only call g_thread_init if the threading system hasn't
	already been activated.

2001-07-03  Michael Meeks  <michael@ximian.com>

	* src/linc-protocols.c (linc_getaddrinfo): don't re-seed the
	random number generator with the time in seconds !
	don't use "%d%d", rand (), rand () - it gains us nothing,
	add gettimeofday ^ instead.

	* src/linc-connection.c (linc_connection_dispose):
	s/shutdown/dispose.

	* src/linc.c (linc_init): fix g_type_init.

2001-07-02  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_setup): regenerate the
	UDS' name on EINVAL from bind.

2001-06-21  Martin Baulig  <baulig@suse.de>

	* configure.in: Make this work if SSL is not installed.

2001-05-25  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_source_remove): split from
	(linc_connection_shutdown): here, and release the self
	reference whilst watching.
	(linc_connection_real_state_changed): use linc_source_remove.
	(linc_connection_connected): hold a ref over the state_changed
	emissions.

2001-05-24  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_connected):
	unref the connection object on disconnection.

	* src/linc-server.c (linc_server_destroy):
	protect against multiple shutdowns, and rename to

	* src/linc-connection.c (linc_connection_destroy): 
	protect against multiple shutdowns, and rename to
	(linc_connection_shutdown): this.
	(linc_connection_real_state_changed): add assertions
	on source removal.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* src/linc-connection.c (linc_connection_destroy): check
	the io channel is valid before the unref - happens in
	some error cases.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* src/linc-server.c (linc_server_class_init): actualy
	make the signal run.

2001-05-18  Michael Meeks  <michael@ximian.com>

	* autogen.sh: update for libtool 1.4

	* src/linc-connection.c (linc_connection_destroy): unref
	the IO channel on destroy - doh.

2000-10-27  Michael Meeks  <michael@helixcode.com>

	* src/linc-server.c (linc_server_get_type): type_register_static
	fix.

	* src/linc-connection.c (linc_connection_writev): use cnx->fd.
	(linc_connection_get_type): add '0' parameter for head glib.

